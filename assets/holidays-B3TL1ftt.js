import"./modulepreload-polyfill-B5Qt9EMX.js";const y={AD:"Андорра",AL:"Албания",AM:"Армения",AR:"Аргентина",AT:"Австрия",AU:"Австралия",AX:"Аландские острова",BA:"Босния и Герцеговина",BB:"Барбадос",BE:"Бельгия",BG:"Болгария",BJ:"Бенин",BO:"Боливия",BR:"Бразилия",BS:"Багамы",BW:"Ботсвана",BY:"Беларусь",BZ:"Белиз",CA:"Канада",CD:"ДР Конго",CG:"Конго",CH:"Швейцария",CL:"Чили",CN:"Китай",CO:"Колумбия",CR:"Коста-Рика",CU:"Куба",CY:"Кипр",CZ:"Чехия",DE:"Германия",DK:"Дания",DO:"Доминиканская Республика",EC:"Эквадор",EE:"Эстония",EG:"Египет",ES:"Испания",FI:"Финляндия",FO:"Фарерские острова",FR:"Франция",GA:"Габон",GB:"Великобритания",GD:"Гренада",GE:"Грузия",GG:"Гернси",GI:"Гибралтар",GL:"Гренландия",GM:"Гамбия",GR:"Греция",GT:"Гватемала",GY:"Гайана",HK:"Гонконг",HN:"Гондурас",HR:"Хорватия",HT:"Гаити",HU:"Венгрия",ID:"Индонезия",IE:"Ирландия",IM:"Остров Мэн",IS:"Исландия",IT:"Италия",JE:"Джерси",JM:"Ямайка",JP:"Япония",KE:"Кения",KR:"Южная Корея",KZ:"Казахстан",LI:"Лихтенштейн",LS:"Лесото",LT:"Литва",LU:"Люксембург",LV:"Латвия",MA:"Марокко",MC:"Монако",MD:"Молдова",ME:"Черногория",MG:"Мадагаскар",MK:"Северная Македония",MN:"Монголия",MS:"Монтсеррат",MT:"Мальта",MX:"Мексика",MZ:"Мозамбик",NA:"Намибия",NE:"Нигер",NG:"Нигерия",NI:"Никарагуа",NL:"Нидерланды",NO:"Норвегия",NZ:"Новая Зеландия",PA:"Панама",PE:"Перу",PG:"Папуа-Новая Гвинея",PH:"Филиппины",PL:"Польша",PR:"Пуэрто-Рико",PT:"Португалия",PY:"Парагвай",RO:"Румыния",RS:"Сербия",RU:"Россия",SE:"Швеция",SG:"Сингапур",SI:"Словения",SJ:"Шпицберген и Ян-Майен",SK:"Словакия",SM:"Сан-Марино",SR:"Суринам",SV:"Сальвадор",TN:"Тунис",TR:"Турция",UA:"Украина",US:"США",UY:"Уругвай",VA:"Ватикан",VE:"Венесуэла",VN:"Вьетнам",ZA:"Южная Африка",ZW:"Зимбабве"},I="https://date.nager.at/api/v3";async function f(t,s){try{const e=await fetch(`${I}/PublicHolidays/${t}/${s}`);if(!e.ok)throw new Error(`Ошибка: ${e.status}`);return await e.json()}catch(e){throw console.error("Ошибка при получении праздников:",e),e}}function B(t){const[s,e,o]=t.split("-");return new Date(`${s}-${e}-${o}T00:00:00`).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}function A(t,s,e=!0){const o=document.getElementById(s);if(!t||t.length===0){o.innerHTML='<div class="no-holidays">Праздники не найдены. Но это не повод грустить :)</div>';return}let n="";t.forEach(c=>{const r=Array.isArray(c.types)?c.types.join(", "):c.types||"";n+=`
            <div class="holiday-item">
                <div class="holiday-name">${c.localName||c.name}</div>
                <div class="holiday-details">
                    ${e?`<span class="holiday-country">${y[c.countryCode]||c.countryCode}</span>`:""}
                    <span class="holiday-types">${r}</span>
                </div>
                ${c.name&&c.name!==c.localName?`<div class="holiday-details">${c.name}</div>`:""}
                <div class="holiday-details">Дата: ${B(c.date)}</div>
            </div>
        `}),o.innerHTML=n}function C(t,s){const e=document.getElementById(s);e.innerHTML=`<div class="error">${t}</div>`}async function S(){const t=new Date,s=document.getElementById("today-date");document.getElementById("today-holidays");const e=document.getElementById("today-loading"),o=t.toISOString().split("T")[0];s.textContent=B(o);try{const n=t.getFullYear(),r=(await f(n,"RU")).filter(u=>u.date===o);e.style.display="none",A(r,"today-holidays",!1)}catch{e.style.display="none",C("Не удалось загрузить праздники на сегодня","today-holidays")}}async function p(){const t=document.getElementById("holiday-date"),s=document.getElementById("search-results"),e=document.getElementById("search-loading"),o=document.getElementById("search-btn"),n=t.value,c=document.querySelectorAll('#country-checkboxes input[type="checkbox"]'),r=Array.from(c).filter(l=>l.checked).map(l=>l.value);if(!n){alert("Пожалуйста, выберите дату");return}if(r.length===0){alert("Пожалуйста, выберите хотя бы одну страну");return}o.disabled=!0,e.style.display="block",s.innerHTML="";const u=n.split("-")[0];let m=[];try{const l=r.map(a=>f(u,a));(await Promise.allSettled(l)).forEach((a,d)=>{const i=r[d];if(a.status==="fulfilled"&&Array.isArray(a.value)){const E=a.value.filter(h=>h.date===n).map(h=>({...h,countryCode:i}));m.push(...E)}else console.error(`Ошибка для страны ${i}:`,a.reason)}),m.sort((a,d)=>{const i=y[a.countryCode]||a.countryCode,E=y[d.countryCode]||d.countryCode;return i.localeCompare(E,"ru")}),e.style.display="none",A(m,"search-results",!0)}catch{e.style.display="none",C("Произошла ошибка при поиске праздников","search-results")}finally{o.disabled=!1}}function g(){const t=document.getElementById("country-checkboxes");t.innerHTML="",Object.entries(y).sort((e,o)=>e[1].localeCompare(o[1],"ru")).forEach(([e,o])=>{const n=document.createElement("label");n.setAttribute("title",o),n.innerHTML=`<input type="checkbox" value="${e}"> ${o}`,t.appendChild(n)})}function v(){const t=document.querySelector('#country-checkboxes input[value="RU"]');t&&(t.checked=!0)}document.addEventListener("DOMContentLoaded",function(){const s=new Date().toISOString().split("T")[0];document.getElementById("holiday-date").value=s,g(),v(),document.getElementById("search-btn").addEventListener("click",p),document.getElementById("holiday-date").addEventListener("keypress",function(n){n.key==="Enter"&&p()});const e=document.getElementById("select-all-btn"),o=document.getElementById("deselect-all-btn");e.addEventListener("click",()=>{document.querySelectorAll('#country-checkboxes input[type="checkbox"]').forEach(n=>n.checked=!0)}),o.addEventListener("click",()=>{document.querySelectorAll('#country-checkboxes input[type="checkbox"]').forEach(n=>n.checked=!1)}),S()});
